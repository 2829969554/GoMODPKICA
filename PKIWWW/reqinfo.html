<html>
<head>
    <title>Example Demo CA</title>
    <link rel="stylesheet" type="text/css" href="css/homestyle.css"  media="screen" />
    <link rel="alternate" type="application/rss+xml" title="Certificate changes" href="feed/certificates">
    <script type="text/javascript" src="js/webview.js"></script>
    <style type="text/css">
        table{
            width: 80%;

        }
        table tr th{
            width: 220px;
        }
        table tr td{
            width: 520px;
        }
    </style>
    <script type="text/javascript">
    var GOAPIDATA={$JSONLIST};
    var htmltemp=(`
    <h1>证书请求详细信息：</h1>
    <p>
        申请单号为 <b>{$reqid}</b>的证书请求的详细信息： 
    </p>
    
    <table width="90%" class="details">
        <tr><th>序列号:</th><td>{$reqid}</td></tr>
        <tr><th>主题信息:</th><td title="{$dnameall}">{$dname}</td></tr>
        <tr><th>密钥位数:</th><td>{$reqkeybit}</td></tr>
        <tr><th>哈希算法:</th><td>{$reqhash}</td></tr>
        <tr><th>证书类别:</th><td>{$reqtype}</td></tr>
        <tr><th>密钥用法:</th><td>{$requsage}</td></tr>
        <tr><th>增强密钥用法:</th><td>{$reqextusage}</td></tr>
        <tr><th>生效日期:</th><td>{$timea}</td></tr>
        <tr><th>失效日期:</th><td>{$timeb}</td></tr>
            <tr><th>使用者可选域名:</th><td>{$dns}</td></tr>
            <tr><th>使用者可选IP:</th><td>{$ip}</td></tr>
            <tr><th>注释信息:</th><td></td></tr>

            <tr><th>提交日期:</th><td>{$time}</td></tr>
            <tr><th>处理状态:</th><td>{$status}</td></tr>
        
    </table>

    
    <form action="admin_operation" method="get">
        <input type="hidden" name="serial" value="{$reqid}"/>
        <input type="submit" value="删除此申请" name="delete" />

        
        <input type="submit" name="issue" value="批准此申请"/>
        <input type="image" src="icon/accept.png" name="issue" value="批准此申请"/>
    </form>
`)
    document.addEventListener('DOMContentLoaded', function() {
        GOAPIDATA[4]=GOAPIDATA[4].replace(/\%/g," ");
        if(GOAPIDATA[1]=="00"){
            GOAPIDATA[1]="普通SSL证书"
        }
        if(GOAPIDATA[1]=="00"){
            GOAPIDATA[1]="普通SSL证书"
        }
        if(GOAPIDATA[1]=="01"){
            GOAPIDATA[1]="扩展验证(EV)SSL证书"
        }
        if(GOAPIDATA[1]=="02"){
            GOAPIDATA[1]="普通代码签名证书"
        }
        if(GOAPIDATA[1]=="03"){
            GOAPIDATA[1]="扩展验证(EV)代码签名证书"
        }
        if(GOAPIDATA[1]=="04"){
            GOAPIDATA[1]="普通电子邮件证书"
        }
        if(GOAPIDATA[1]=="05"){
            GOAPIDATA[1]="扩展验证(EV)电子邮件证书"
        }
        if(GOAPIDATA[1]=="0"){
            GOAPIDATA[1]="用户证书"
        }
        if(GOAPIDATA[1]=="1"){
            GOAPIDATA[1]="CA证书"
        }
        if(GOAPIDATA[7]=="1"){
            GOAPIDATA[7]="KeyUsageDigitalSignature,KeyUsageKeyEncipherment,KeyUsageDataEncipherment,KeyUsageKeyAgreement";
        }
        if(GOAPIDATA[7]=="2"){
            GOAPIDATA[7]="KeyUsageDigitalSignature,KeyUsageContentCommitment,KeyUsageCertSign,KeyUsageCRLSign";
        }
         if(GOAPIDATA[7]=="3"){
            GOAPIDATA[7]="KeyUsageDigitalSignature,KeyUsageEncipherOnly";
        }
        if(GOAPIDATA[7]=="4"){
            GOAPIDATA[7]="KeyUsageDigitalSignature,KeyUsageDecipherOnly";
        }
        htmltemp=htmltemp.replace(/\{\$reqid\}/g, GOAPIDATA[0]); 

        htmltemp=htmltemp.replace(/\{\$time\}/, timestampToDate(GOAPIDATA[2]));

        htmltemp=htmltemp.replace(/\{\$status\}/, GOAPIDATA[3]);

        htmltemp=htmltemp.replace(/\{\$reqtype\}/, GOAPIDATA[1]);
        htmltemp=htmltemp.replace(/\{\$dnameall\}/, GOAPIDATA[4]);


        htmltemp=htmltemp.replace(/\{\$dname\}/, GOAPIDATA[4].substring(0,60)+"......");  

        htmltemp=htmltemp.replace(/\{\$reqkeybit\}/, GOAPIDATA[5]);  

        htmltemp=htmltemp.replace(/\{\$reqhash\}/, GOAPIDATA[6]);  

        htmltemp=htmltemp.replace(/\{\$requsage\}/, GOAPIDATA[7]);  

        htmltemp=htmltemp.replace(/\{\$reqextusage\}/, GOAPIDATA[8]);  

        htmltemp=htmltemp.replace(/\{\$timea\}/, GOAPIDATA[10]);  
        htmltemp=htmltemp.replace(/\{\$timeb\}/, GOAPIDATA[10]);  
        htmltemp=htmltemp.replace(/\{\$dns\}/, GOAPIDATA[11]); 
        htmltemp=htmltemp.replace(/\{\$ip\}/, GOAPIDATA[12]); 
        document.getElementById('content').innerHTML=htmltemp;
        console.log(GOAPIDATA);
    });
//时间戳转MODPKICA内部时间文本
function timestampToDate(timestamp) {  
  var date = new Date(timestamp * 1);

   // 将时间戳转换为毫秒级时间戳  
  var year = date.getFullYear();  
  var month = date.getMonth() + 1; // getMonth() 返回的月份从0开始，所以需要加1  
  var day = date.getDate();  
  var hours = date.getHours();  
  var minutes = date.getMinutes();  
  var seconds = date.getSeconds();  
  
  // 格式化日期和时间  
  var formattedDate = year + '/' + (month < 10 ? '0' + month : month) + '/' + (day < 10 ? '0' + day : day);  
  var formattedTime = hours + ':' + (minutes < 10 ? '0' + minutes : minutes) + ':' + (seconds < 10 ? '0' + seconds : seconds);  
  
  return formattedDate + '-' + formattedTime;  
}  
    </script>
</head>
<body>
<div id="header">
    <div id="logo">
        <h1>Example Demo CA</h1>
        
    </div>
</div>

<div id="menu_wrap">
    <div id="menu">
        <ul>
            <li><a href="/home.html">主页</a></li>
            <li><a href="/reqcsrgen.html">证书在线申请&nbsp;帮助</a></li>
            <li><a href="/pushcsr.html">提交离线&nbsp;证书申请</a></li>
            <li><a href="/caserver.html">证书机构服务</a></li>
            <li><a href="/certslist.html">所有证书&nbsp;列表</a></li>
            <li><a href="/reqlist.html">证书申请&nbsp;列表</a></li>
        </ul>
        
    </div>
</div>

<div id="menu_wrap">
    <div id="menu">
        <ul>
            
            <li><a href="/adreqlist.html">待处理证书请求&nbsp;列表</a></li>
            <li><a href="/adcertslist.html">证书&nbsp;管理</a></li>
            
            
        </ul>
    </div>
</div>

<div id="page">

<div id="content">
    <!--
    <h1>证书请求详细信息：</h1>
    <p>
        申请单号为 <b id="reqid">req_0000018c8127bd92</b>的证书请求的详细信息： 
    </p>
    
    <table width="90%" class="details">
        <tr><th>序列号:</th><td>req_0000018c8127bd92</td></tr>
        <tr><th>主题信息:</th><td>CN=123,O=123,OU=123,L=123,C=CN,E=123</td></tr>
        <tr><th>申请日期:</th><td>Tue Dec 19 16:18:34 CST 2023</td></tr>
        <tr><th>密钥位数:</th><td>4096</td></tr>
        <tr><th>哈希算法:</th><td>sha256</td></tr>
        <tr><th>证书类别:</th><td>用户证书域名证书</td></tr>
        <tr><th>密钥用法:</th><td>1</td></tr>
        <tr><th>增强密钥用法:</th><td>1，2，3</td></tr>
        <tr><th>生效日期:</th><td>2001xxxxx</td></tr>
        <tr><th>失效日期:</th><td>2002xxxxx</td></tr>
            <tr><th>使用者可选域名:</th><td>127.0.0.1</td></tr>
            <tr><th>使用者可选IP:</th><td>127.0.0.1</td></tr>
            <tr><th>注释信息:</th><td></td></tr>
        
    </table>

    
    <form action="admin_operation" method="get">
        <input type="hidden" name="serial" value="req_0000018c8127bd92"/>
        <input type="submit" value="删除此申请" name="delete" />

        
        <input type="submit" name="issue" value="批准此申请"/>
        <input type="image" src="icon/accept.png" name="issue" value="批准此申请"/>
    </form>
    
        
-->
    
</div>


</div>


	<div style="clear: both;">&nbsp;</div>


<div id="footer">
    <p>此 CA 由 <a
    href="mailto:2829969554@qq.com"/>MODPKICA</a></p>
	<p>当前网页模板 <a href="">免费模板</a>.</p>
    <p>Powered by <a href="">MOD PKI CA</a></p>
</div>
</body>
</html>